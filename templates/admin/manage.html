{% extends "admin/base.html" %}

{% block title %}Manage Content - Admin Dashboard{% endblock %}
{% block header_title %}Manage Content{% endblock %}

{% block content %}
<div class="flex items-center justify-end mb-8">
    <button onclick="openCategoryModal()"
        class="flex items-center px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-semibold shadow-lg hover:shadow-indigo-500/30 transition-all hover:scale-105 active:scale-95">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        New Category
    </button>
</div>

<div class="space-y-6" id="management-container">
</div>

<div id="category-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
    <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" onclick="closeCategoryModal()"></div>

    <div class="relative w-full max-w-md bg-white rounded-2xl shadow-2xl z-10 p-6 animate-fade-in-up">
        <h3 class="text-xl font-bold text-slate-900">New Category</h3>
        <div class="mt-4">
            <label class="block text-sm font-medium text-slate-700 mb-1">Category Name</label>
            <input type="text" id="new-cat-name" placeholder="e.g. Best Actor"
                class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border outline-none">
        </div>
        <div class="mt-6 flex justify-end gap-3">
            <button onclick="closeCategoryModal()"
                class="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium">Cancel</button>
            <button onclick="submitCategory()"
                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">Create</button>
        </div>
    </div>
</div>

<div id="card-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
    <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeCardModal()"></div>
    <div
        class="relative w-full max-w-lg bg-white rounded-2xl shadow-2xl z-10 p-6 animate-fade-in-up max-h-[90vh] overflow-y-auto custom-scrollbar">
        <h3 class="text-xl font-bold text-slate-900 mb-4">Add Card</h3>
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Category</label>
                <select id="card-category-select"
                    class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border bg-white"></select>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Title</label>
                <input type="text" id="card-title" placeholder="Make 'Em Laugh"
                    class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Subtitle</label>
                <input type="text" id="card-subtitle" placeholder="Comedy // Best Performance"
                    class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border">
                <div id="subtitle-preview" class="text-sm text-slate-500 mt-2"></div>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Image</label>
                <input type="file" id="card-image-file" accept="image/*"
                    class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
            </div>
        </div>
        <div class="mt-6 flex justify-end gap-3">
            <button onclick="closeCardModal()"
                class="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium">Cancel</button>
            <button onclick="submitCard()" id="submit-card-btn"
                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">Add Card</button>
        </div>
    </div>
</div>

<div id="edit-category-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
    <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeEditCategoryModal()"></div>
    <div class="relative w-full max-w-md bg-white rounded-2xl shadow-2xl z-10 p-6 animate-fade-in-up">
        <h3 class="text-xl font-bold text-slate-900">Edit Category</h3>
        <input type="hidden" id="edit-cat-id">
        <div class="mt-4">
            <label class="block text-sm font-medium text-slate-700 mb-1">Display Name</label>
            <input type="text" id="edit-cat-name"
                class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border">
        </div>
        <div class="mt-6 flex justify-end gap-3">
            <button onclick="closeEditCategoryModal()"
                class="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium">Cancel</button>
            <button onclick="submitEditCategory()"
                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">Save
                Changes</button>
        </div>
    </div>
</div>

<div id="edit-card-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
    <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeEditCardModal()"></div>
    <div
        class="relative w-full max-w-lg bg-white rounded-2xl shadow-2xl z-10 p-6 animate-fade-in-up max-h-[90vh] overflow-y-auto custom-scrollbar">
        <h3 class="text-xl font-bold text-slate-900 mb-4">Edit Card</h3>
        <input type="hidden" id="edit-card-id">
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Title</label>
                <input type="text" id="edit-card-title"
                    class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Subtitle</label>
                <input type="text" id="edit-card-subtitle"
                    class="w-full rounded-lg border-slate-200 focus:ring-2 focus:ring-indigo-500 p-2.5 border">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Image</label>
                <div class="flex items-center space-x-4">
                    <img id="edit-card-image-preview" src=""
                        class="h-16 w-16 rounded-lg object-cover bg-slate-100 border">
                    <input type="file" id="edit-card-image-file" accept="image/*"
                        class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
                </div>
            </div>
        </div>
        <div class="mt-6 flex justify-end gap-3">
            <button onclick="closeEditCardModal()"
                class="px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium">Cancel</button>
            <button onclick="submitEditCard()" id="save-card-btn"
                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">Save
                Changes</button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
<!-- app.js is loaded in base.html -->
{% endblock %}